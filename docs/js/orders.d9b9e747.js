(function(){"use strict";var e={1114:function(e,t,a){var r=a(9242),n=a(3396);function s(e,t,a,r,s,i){const o=(0,n.up)("OrdersPageComponent");return(0,n.wg)(),(0,n.j4)(o)}var i=a(7139);const o=e=>((0,n.dD)("data-v-79aacebd"),e=e(),(0,n.Cn)(),e),l={class:"viewport"},d={class:"background-image"},c={class:"content"},u=o((()=>(0,n._)("div",{class:"text"}," Orders ",-1))),v={class:"main-container"},p={class:"top-container"},f={class:"status-dropdown"},m=o((()=>(0,n._)("div",{class:"status-title"}," Order Status ",-1))),h={class:"status-input"},y=o((()=>(0,n._)("option",{value:"Preparing","data-test":"preparing-button"},"Preparing",-1))),_=o((()=>(0,n._)("option",{value:"Collect"},"To Collect",-1))),w=o((()=>(0,n._)("option",{value:"Completed"},"Completed",-1))),g=o((()=>(0,n._)("option",{value:"Cancelled"},"Cancelled",-1))),b=[y,_,w,g],O={class:"order-dropdown"},C=o((()=>(0,n._)("div",{class:"order-title"}," Order ",-1))),D={class:"order-input"},k=["value"],I={key:0,class:"order-container"},Z={class:"order-top-container"},P=(0,n.uE)('<div class="order-id-name-title" data-v-79aacebd><div class="order-id-title" data-v-79aacebd> Order ID: 5 </div><div class="order-name-title" data-v-79aacebd> Ordered by: Zhen Hern </div></div><div class="table-head" data-v-79aacebd><div class="item-head" data-v-79aacebd></div><div class="name-head" data-v-79aacebd>Item</div><div class="quantity-head" data-v-79aacebd>Quantity</div><div class="price-head" data-v-79aacebd>Price</div></div>',2),S={key:0,class:"loading"},j=o((()=>(0,n._)("i",{class:"fas fa-spinner fa-spin"},null,-1))),q=[j],x={key:1,class:"table-content"},U={class:"item-image"},W=["src"],$={class:"item-name"},z={class:"item-quantity"},F={class:"item-price"},N={class:"order-bot-container"},T={class:"change-status"},A=o((()=>(0,n._)("div",{class:"view-orders-button"}," Change Status: ",-1))),M={class:"status-input"},Y=o((()=>(0,n._)("option",{value:"Preparing"},"Preparing",-1))),E=o((()=>(0,n._)("option",{value:"Collect"},"To Collect",-1))),H=o((()=>(0,n._)("option",{value:"Completed"},"Completed",-1))),V=o((()=>(0,n._)("option",{value:"Cancelled"},"Cancelled",-1))),B=[Y,E,H,V],K={class:"done-button-container"},Q={class:"confirm-overlay",ref:"confirmOverlay"},G={class:"confirm-container"},J=o((()=>(0,n._)("div",{class:"confirm-text"}," Are you sure you want to change the status? ",-1))),L={class:"confirm-buttons"};function R(e,t,a,s,o,y){const _=(0,n.up)("NavigationBar"),w=(0,n.up)("DisplayOverlay"),g=(0,n.up)("WebsiteFooter");return(0,n.wg)(),(0,n.iD)("div",l,[(0,n.Wm)(_),(0,n._)("div",d,[(0,n._)("div",c,[(0,n.Wm)(r.uT,null,{default:(0,n.w5)((()=>[u])),_:1})])]),(0,n._)("div",v,[(0,n._)("div",p,[(0,n._)("div",f,[m,(0,n._)("div",h,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.status=e)},b,512),[[r.bM,o.status]])])]),(0,n._)("div",O,[C,(0,n._)("div",D,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>o.orderID=e)},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.allOrders,((e,t)=>((0,n.wg)(),(0,n.iD)("option",{value:e.item_cart_id,key:t,"data-test":"order-selection"},(0,i.zw)(e.item_cart_id)+" - "+(0,i.zw)(o.user.first_name),9,k)))),128))],512),[[r.bM,o.orderID]])])])]),null!=o.orderID?((0,n.wg)(),(0,n.iD)("div",I,[(0,n._)("div",Z,[P,o.loading?((0,n.wg)(),(0,n.iD)("div",S,q)):((0,n.wg)(),(0,n.iD)("div",x,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(o.items,((e,t)=>((0,n.wg)(),(0,n.iD)("div",{class:"order-item",key:t},[(0,n._)("div",U,[(0,n._)("img",{src:y.getImgUrl(e.productImage)},null,8,W)]),(0,n._)("div",$,(0,i.zw)(e.productName),1),(0,n._)("div",z,(0,i.zw)(e.quantity),1),(0,n._)("div",F,(0,i.zw)(e.price),1)])))),128))]))]),(0,n._)("div",N,[(0,n._)("div",T,[A,(0,n._)("div",M,[(0,n.wy)((0,n._)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.newStatus=e)},B,512),[[r.bM,o.newStatus]])])]),(0,n._)("div",K,[(0,n._)("div",{class:"done-button",onClick:t[3]||(t[3]=e=>y.openConfirmOverlay())}," Done ")])])])):(0,n.kq)("",!0),(0,n._)("div",Q,[(0,n._)("div",G,[J,(0,n._)("div",L,[(0,n._)("div",{class:"yes-button",onClick:t[4]||(t[4]=e=>y.changeStatus())}," Yes "),(0,n._)("div",{class:"no-button",onClick:t[5]||(t[5]=e=>y.closeConfirmOverlay())}," No ")])])],512),(0,n.Wm)(w,{ref:"overlay"},null,512)]),(0,n.Wm)(g)])}a(7658);var X=a(6227),ee=a(9777),te=a(4042),ae=a(1689),re=a(2557),ne=a(9354),se={components:{NavigationBar:X.Z,WebsiteFooter:ee.Z,DisplayOverlay:te.Z},async mounted(){this.allOrders=await ae.Z.showAllPaidOrders(),this.user=await re.Z.showCurrentUser(1)},data(){return{allOrders:null,order:null,user:"",status:"",newStatus:"",orderID:null,items:[],loading:0}},methods:{getImgUrl(e){return"https://54.253.165.56/images/"+e},openConfirmOverlay(){this.$refs.confirmOverlay.style.display="block"},closeConfirmOverlay(){this.$refs.confirmOverlay.style.display="none"},async changeStatus(){try{await ae.Z.changeStatus({itemCartID:this.orderID,status:this.newStatus}),this.rerender(),this.$refs.confirmOverlay.style.display="none",this.$refs.overlay.openOverlay("Status is changed")}catch{this.$refs.confirmOverlay.style.display="none",this.$refs.overlay.openErrorOverlay("Fail to change status")}},async rerender(){this.status="",this.orderID=null,this.order=null,this.allOrders=await ae.Z.showAllPaidOrders()}},watch:{async status(e){this.allOrders=await ae.Z.showStatusOrders(e)},async orderID(e){this.loading=1,this.items=[],this.order=await ae.Z.showOrder(e);var t=await ae.Z.showAllItems(e);for(let r=0;r<t.length;r++){var a=await ne.Z.showProduct(t[r].product_id);this.items.push({productImage:a.image_name1,productName:a.product_name,quantity:t[r].quantity,price:a.product_price})}this.newStatus=this.order.status,this.loading=0},newStatus(e){this.newStatus=e}}},ie=a(89);const oe=(0,ie.Z)(se,[["render",R],["__scopeId","data-v-79aacebd"]]);var le=oe,de={components:{OrdersPageComponent:le}};const ce=(0,ie.Z)(de,[["render",s]]);var ue=ce,ve=a(6400);r.ri(ue).use(ve.ZP).mount("#app")}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,s){if(!r){var i=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],s=e[c][2];for(var o=!0,l=0;l<r.length;l++)(!1&s||i>=s)&&Object.keys(a.O).every((function(e){return a.O[e](r[l])}))?r.splice(l--,1):(o=!1,s<i&&(i=s));if(o){e.splice(c--,1);var d=n();void 0!==d&&(t=d)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[r,n,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.j=486}(),function(){a.p="/FYP2022/"}(),function(){var e={486:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,s,i=r[0],o=r[1],l=r[2],d=0;if(i.some((function(t){return 0!==e[t]}))){for(n in o)a.o(o,n)&&(a.m[n]=o[n]);if(l)var c=l(a)}for(t&&t(r);d<i.length;d++)s=i[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},r=self["webpackChunkfirst_project"]=self["webpackChunkfirst_project"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[998,64],(function(){return a(1114)}));r=a.O(r)})();
//# sourceMappingURL=orders.d9b9e747.js.map