(function(){"use strict";var t={3829:function(t,e,i){var s=i(9242),r=i(3396);function a(t,e,i,s,a,o){const n=(0,r.up)("UserProfileComponent");return(0,r.wg)(),(0,r.j4)(n)}const o={class:"viewport"},n={class:"container"};function l(t,e,i,s,a,l){const d=(0,r.up)("NavigationBar"),c=(0,r.up)("UserProfileMenu"),h=(0,r.up)("WebsiteFooter");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(d,{ref:"navbar"},null,512),(0,r._)("div",n,[(0,r.Wm)(c,{onComponent:e[0]||(e[0]=t=>a.currentTabComponent=t),ref:"menu"},null,512),((0,r.wg)(),(0,r.j4)((0,r.LL)(a.currentTabComponent),{onSave:l.rerenderMenu},null,40,["onSave"]))]),(0,r.Wm)(h)])}var d=i(7717),c=i(7139);const h=t=>((0,r.dD)("data-v-662f2f57"),t=t(),(0,r.Cn)(),t),u={key:0,class:"menu-container"},w={class:"username"},m={class:"menu-buttons"},p=h((()=>(0,r._)("i",{class:"fa fa-user","aria-hidden":"true"},null,-1))),v=h((()=>(0,r._)("div",{class:"buttons-title"}," My Account ",-1))),y=[p,v],f={class:"account-dropdown",ref:"account"},g=h((()=>(0,r._)("i",{class:"fa fa-shopping-bag","aria-hidden":"true"},null,-1))),_=h((()=>(0,r._)("div",{class:"buttons-title"}," My Purchases ",-1))),C=[g,_],P=h((()=>(0,r._)("i",{class:"fa-solid fa-bell"},null,-1))),b=h((()=>(0,r._)("div",{class:"buttons-title"}," My Notifications ",-1))),k=[P,b],D=h((()=>(0,r._)("i",{class:"fa-solid fa-barcode"},null,-1))),A=h((()=>(0,r._)("div",{class:"buttons-title"}," My Vouchers ",-1))),T=[D,A];function V(t,e,i,s,a,o){return a.renderComponent?((0,r.wg)(),(0,r.iD)("div",u,[(0,r._)("div",w,(0,c.zw)(a.firstName),1),(0,r._)("div",m,[(0,r._)("div",{class:"button",onClick:e[0]||(e[0]=t=>o.showAccountDropdown())},y),(0,r._)("div",f,[(0,r._)("div",{class:(0,c.C_)("MyProfile"===a.component?"account-dropdown-content-active":"account-dropdown-content"),onClick:e[1]||(e[1]=t=>o.changeComponent("MyProfile"))}," Profile ",2),(0,r._)("i",{class:(0,c.C_)("MyProfile"===a.component?"a fa-regular fa-edit":"fa-regular fa-edit"),onClick:e[2]||(e[2]=t=>o.changeComponent("MyProfile"))},null,2),(0,r._)("div",{class:(0,c.C_)("MyPayment"===a.component?"account-dropdown-content-active":"account-dropdown-content"),onClick:e[3]||(e[3]=t=>o.changeComponent("MyPayment"))}," Payment Methods ",2),(0,r._)("i",{class:(0,c.C_)("MyPayment"===a.component?"a fa-regular fa-credit-card":"fa-regular fa-credit-card"),onClick:e[4]||(e[4]=t=>o.changeComponent("MyPayment"))},null,2),(0,r._)("div",{class:(0,c.C_)("ChangePassword"===a.component?"account-dropdown-content-active":"account-dropdown-content"),onClick:e[5]||(e[5]=t=>o.changeComponent("ChangePassword"))}," Change Password ",2),(0,r._)("i",{class:(0,c.C_)("ChangePassword"===a.component?"a fa-solid fa-key":"fa-solid fa-key"),onClick:e[6]||(e[6]=t=>o.changeComponent("ChangePassword"))},null,2)],512),(0,r._)("div",{class:(0,c.C_)("MyPurchases"==a.component?"button-active":"button"),onClick:e[7]||(e[7]=t=>o.changeComponent("MyPurchases"))},C,2),(0,r._)("div",{class:(0,c.C_)("MyNotifications"==a.component?"button-active":"button"),onClick:e[8]||(e[8]=t=>o.changeComponent("MyNotifications"))},k,2),(0,r._)("div",{class:(0,c.C_)("MyVouchers"==a.component?"button-active":"button"),onClick:e[9]||(e[9]=t=>o.changeComponent("MyVouchers"))},T,2)])])):(0,r.kq)("",!0)}var N=i(2557),U={async mounted(){this.component=this.$storage.getStorageSync("userProfile"),this.currentUserID=this.$storage.getStorageSync("loginID");var t=await N.Z.showCurrentUser(this.currentUserID);this.firstName=t.first_name},data(){return{currentUserID:null,firstName:null,component:"",renderComponent:!0}},methods:{showAccountDropdown(){this.showTab="account"},changeComponent(t){this.component=t,this.$emit("component",t),this.$storage.setStorageSync("userProfile",this.component)},async forceRerender(){var t=await N.Z.showCurrentUser(this.currentUserID);this.firstName=t.first_name}},watch:{showTab(t){"account"==t?(this.$refs.account.style.visibility="visible",this.$refs.account.style.opacity="100%",this.$refs.account.style.height="fit-content"):(this.$refs.account.style.visibility="hidden",this.$refs.account.style.opacity="0%",this.$refs.account.style.height="0px")}}},O=i(89);const L=(0,O.Z)(U,[["render",V],["__scopeId","data-v-662f2f57"]]);var I=L;const M=t=>((0,r.dD)("data-v-2172c5ea"),t=t(),(0,r.Cn)(),t),S={class:"main-container"},$=M((()=>(0,r._)("div",{class:"header"},[(0,r._)("div",{class:"title"},"My Profile"),(0,r.Uk)(" Manage and protect your account ")],-1))),Z={class:"form"},E={class:"row-container"},x=M((()=>(0,r._)("div",{class:"label"}," Email ",-1))),F={class:"email-input"},H={class:"row-container"},q=M((()=>(0,r._)("div",{class:"label"}," First Name ",-1))),j={class:"error-text"},z={class:"row-container"},Y=M((()=>(0,r._)("div",{class:"label"}," Last Name ",-1))),W={class:"error-text"},R={class:"row-container"},B=M((()=>(0,r._)("div",{class:"label"}," Date of birth ",-1))),K={class:"error-text"},X={class:"save-button-container"};function G(t,e,i,a,o,n){const l=(0,r.up)("DisplayOverlay");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l,{ref:"overlay"},null,512),(0,r._)("div",S,[$,(0,r._)("div",Z,[(0,r._)("div",E,[x,(0,r._)("div",F,(0,c.zw)(o.email),1)]),(0,r._)("div",H,[q,(0,r._)("div",{class:(0,c.C_)(o.firstNameValidity?"name-input":"error")},[(0,r.wy)((0,r._)("input",{type:"placeholder","onUpdate:modelValue":e[0]||(e[0]=t=>o.firstName=t)},null,512),[[s.nr,o.firstName]])],2)]),(0,r.wy)((0,r._)("div",j,"First name cannot be empty.",512),[[s.F8,!o.firstNameValidity]]),(0,r._)("div",z,[Y,(0,r._)("div",{class:(0,c.C_)(o.lastNameValidity?"name-input":"error")},[(0,r.wy)((0,r._)("input",{type:"placeholder","onUpdate:modelValue":e[1]||(e[1]=t=>o.lastName=t)},null,512),[[s.nr,o.lastName]])],2)]),(0,r.wy)((0,r._)("div",W,"Last name cannot be empty.",512),[[s.F8,!o.lastNameValidity]]),(0,r._)("div",R,[B,(0,r._)("div",{class:(0,c.C_)(o.birthdayValidity?"name-input":"error")},[(0,r.wy)((0,r._)("input",{type:"date",max:"9999-12-31","onUpdate:modelValue":e[2]||(e[2]=t=>o.birthday=t)},null,512),[[s.nr,o.birthday]])],2)]),(0,r.wy)((0,r._)("div",K,"Date of birth cannot be empty.",512),[[s.F8,!o.birthdayValidity]])]),(0,r._)("div",X,[(0,r._)("div",{class:"save-button",onClick:e[3]||(e[3]=t=>n.checkValidity())},"Save")])])],64)}var J=i(1541),Q={async mounted(){this.currentUserID=this.$storage.getStorageSync("loginID");var t=await N.Z.showCurrentAccount(this.currentUserID);this.email=t.email;var e=await N.Z.showCurrentUser(this.currentUserID);this.firstName=e.first_name,this.lastName=e.last_name,this.birthday=e.birthday},components:{DisplayOverlay:J.Z},data(){return{currentUserID:null,email:null,firstName:null,lastName:null,birthday:null,firstNameValidity:!0,lastNameValidity:!0,birthdayValidity:!0}},methods:{checkValidity(){""===this.firstName&&(this.firstNameValidity=!1),""===this.lastName&&(this.lastNameValidity=!1),""===this.birthday&&(this.birthdayValidity=!1),this.firstNameValidity&&this.lastNameValidity&&this.birthdayValidity&&this.saveProfile()},async saveProfile(){var t=await N.Z.saveProfile({loginID:this.currentUserID,firstName:this.firstName,lastName:this.lastName,birthday:this.birthday});"Profile Saved"==t.data?(this.$refs.overlay.openOverlay("Profile saved"),this.$emit("save")):this.$refs.overlay.openErrorOverlay("Fail to save profile")}},watch:{firstName(){this.firstNameValidity=!0},lastName(){this.lastNameValidity=!0},birthday(){this.birthdayValidity=!0}}};const tt=(0,O.Z)(Q,[["render",G],["__scopeId","data-v-2172c5ea"]]);var et=tt;const it=t=>((0,r.dD)("data-v-53a15cb0"),t=t(),(0,r.Cn)(),t),st={class:"main-container"},rt=it((()=>(0,r._)("div",{class:"header"},[(0,r._)("div",{class:"title"},"Change Password"),(0,r.Uk)(" For your account's security, do not share your password with anyone else ")],-1))),at={class:"form"},ot={class:"row-container"},nt=it((()=>(0,r._)("div",{class:"label"}," Current Password ",-1))),lt=["type"],dt={class:"toggle-hide"},ct={class:"error-text"},ht={class:"row-container"},ut=it((()=>(0,r._)("div",{class:"label"}," New Password ",-1))),wt=["type"],mt={class:"toggle-hide"},pt={class:"error-text"},vt={class:"row-container"},yt=it((()=>(0,r._)("div",{class:"label"}," Confirm Password ",-1))),ft=["type"],gt={class:"toggle-hide"},_t={class:"error-text"},Ct={class:"confirm-button-container"};function Pt(t,e,i,a,o,n){const l=(0,r.up)("DisplayOverlay");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.Wm)(l,{ref:"overlay"},null,512),(0,r._)("div",st,[rt,(0,r._)("div",at,[(0,r._)("div",ot,[nt,(0,r._)("div",{class:(0,c.C_)(o.currentPasswordValidity?"input":"error")},[(0,r.wy)((0,r._)("input",{type:o.hideCurrentPassword?"password":"placeholder","onUpdate:modelValue":e[0]||(e[0]=t=>o.currentPassword=t)},null,8,lt),[[s.YZ,o.currentPassword]]),(0,r._)("div",dt,[o.hideCurrentPassword?((0,r.wg)(),(0,r.iD)("i",{key:0,class:"fa-solid fa-eye",onClick:e[1]||(e[1]=t=>n.toggleHideCurrentPassword())})):((0,r.wg)(),(0,r.iD)("i",{key:1,class:"fa-solid fa-eye-slash",onClick:e[2]||(e[2]=t=>n.toggleHideCurrentPassword())}))])],2)]),(0,r.wy)((0,r._)("div",ct,"Password should at least contain 8 characters.",512),[[s.F8,!o.currentPasswordValidity]]),(0,r._)("div",ht,[ut,(0,r._)("div",{class:(0,c.C_)(o.newPasswordValidity?"input":"error")},[(0,r.wy)((0,r._)("input",{type:o.hideNewPassword?"password":"placeholder","onUpdate:modelValue":e[3]||(e[3]=t=>o.newPassword=t)},null,8,wt),[[s.YZ,o.newPassword]]),(0,r._)("div",mt,[o.hideNewPassword?((0,r.wg)(),(0,r.iD)("i",{key:0,class:"fa-solid fa-eye",onClick:e[4]||(e[4]=t=>n.toggleHideNewPassword())})):((0,r.wg)(),(0,r.iD)("i",{key:1,class:"fa-solid fa-eye-slash",onClick:e[5]||(e[5]=t=>n.toggleHideNewPassword())}))])],2)]),(0,r.wy)((0,r._)("div",pt,"Password should at least contain 8 characters, one uppercase and one lowercase characters, one number and one symbol.",512),[[s.F8,!o.newPasswordValidity]]),(0,r._)("div",vt,[yt,(0,r._)("div",{class:(0,c.C_)(o.confirmPasswordValidity?"input":"error")},[(0,r.wy)((0,r._)("input",{type:o.hideConfirmPassword?"password":"placeholder","onUpdate:modelValue":e[6]||(e[6]=t=>o.confirmPassword=t)},null,8,ft),[[s.YZ,o.confirmPassword]]),(0,r._)("div",gt,[o.hideConfirmPassword?((0,r.wg)(),(0,r.iD)("i",{key:0,class:"fa-solid fa-eye",onClick:e[7]||(e[7]=t=>n.toggleHideConfirmPassword())})):((0,r.wg)(),(0,r.iD)("i",{key:1,class:"fa-solid fa-eye-slash",onClick:e[8]||(e[8]=t=>n.toggleHideConfirmPassword())}))])],2)]),(0,r.wy)((0,r._)("div",_t,"Password entered is different.",512),[[s.F8,!o.confirmPasswordValidity]])]),(0,r._)("div",Ct,[(0,r._)("div",{class:"confirm-button",onClick:e[9]||(e[9]=t=>n.checkValidity())},"Confirm")])])],64)}var bt={components:{DisplayOverlay:J.Z},data(){return{currentPassword:"",newPassword:"",confirmPassword:"",hideCurrentPassword:!0,hideNewPassword:!0,hideConfirmPassword:!0,currentPasswordValidity:!0,newPasswordValidity:!0,confirmPasswordValidity:!0}},methods:{toggleHideCurrentPassword(){this.hideCurrentPassword=!this.hideCurrentPassword},toggleHideNewPassword(){this.hideNewPassword=!this.hideNewPassword},toggleHideConfirmPassword(){this.hideConfirmPassword=!this.hideConfirmPassword},checkValidity(){this.currentPassword.length<8&&(this.currentPasswordValidity=!1),(this.newPassword.length<8||!/\d/.test(this.newPassword)||!/[ `!@`[`#$%^&*()_+\-={};':"\\|\],.<>`/`?~]/.test(this.newPassword)||this.newPassword===this.newPassword.toUpperCase()||this.newPassword===this.newPassword.toLowerCase())&&(this.newPasswordValidity=!1),this.confirmPassword!=this.newPassword?this.confirmPasswordValidity=!1:this.confirmPasswordValidity=!0,this.currentPasswordValidity&&this.newPasswordValidity&&this.confirmPasswordValidity&&this.changePassword()},async changePassword(){var t=await N.Z.showCurrentAccount(this.$storage.getStorageSync("loginID"));t.password==this.currentPassword?(await N.Z.changePassword({loginID:t.login_id,password:this.newPassword}),this.$refs.overlay.openOverlay("Password changed")):this.$refs.overlay.openErrorOverlay("Incorrect password"),this.currentPassword="",this.newPassword="",this.confirmPassword=""}},watch:{currentPassword(){this.currentPasswordValidity=!0},newPassword(){this.newPasswordValidity=!0},confirmPassword(){this.confirmPasswordValidity=!0}}};const kt=(0,O.Z)(bt,[["render",Pt],["__scopeId","data-v-53a15cb0"]]);var Dt=kt,At=i.p+"img/order.2bd689fa.png";const Tt=t=>((0,r.dD)("data-v-2140837c"),t=t(),(0,r.Cn)(),t),Vt={class:"main-container"},Nt={class:"navigation-header"},Ut={class:"navigation-container"},Ot=Tt((()=>(0,r._)("i",{class:"fa-solid fa-caret-down"},null,-1))),Lt={class:"dropdown-selections",ref:"dropdown"},It={key:0,class:"loading"},Mt=Tt((()=>(0,r._)("i",{class:"fas fa-spinner fa-spin"},null,-1))),St=[Mt],$t={key:1,class:"order-list",ref:"scrollComponent"},Zt={class:"top-container"},Et={class:"order-title"},xt={class:"order-id"},Ft={class:"order-status"},Ht={key:0,class:"prepared"},qt=Tt((()=>(0,r._)("i",{class:"fa-solid fa-clipboard-check"},null,-1))),jt={key:1,class:"cancelled"},zt=Tt((()=>(0,r._)("i",{class:"fa-solid fa-circle-exclamation"},null,-1))),Yt={key:2,class:"prepared"},Wt=Tt((()=>(0,r._)("i",{class:"fa-solid fa-store"},null,-1))),Rt={key:3,class:"preparing"},Bt=Tt((()=>(0,r._)("i",{class:"fa-solid fa-spinner"},null,-1))),Kt={class:"order-content"},Xt={class:"product-image"},Gt=["src"],Jt={class:"name-quantity"},Qt={class:"name"},te={class:"quantity"},ee={class:"price"},ie={class:"bottom-container"},se={class:"subtotal"},re={key:2,class:"empty-list"},ae=Tt((()=>(0,r._)("img",{src:At,alt:""},null,-1))),oe=Tt((()=>(0,r._)("div",{class:"text"},"Please place your orders first.",-1))),ne=[ae,oe];function le(t,e,i,s,a,o){return(0,r.wg)(),(0,r.iD)("div",Vt,[(0,r._)("div",Nt,[(0,r._)("div",{class:(0,c.C_)("All"==a.showing?"navigation-button-active":"navigation-button"),onClick:e[0]||(e[0]=t=>o.showAll())},"All",2),(0,r._)("div",{class:(0,c.C_)("Preparing"==a.showing?"navigation-button-active":"navigation-button"),onClick:e[1]||(e[1]=t=>o.showPreparing())},"Preparing",2),(0,r._)("div",{class:(0,c.C_)("To Collect"==a.showing?"navigation-button-active":"navigation-button"),onClick:e[2]||(e[2]=t=>o.showToCollect())},"To Collect",2),(0,r._)("div",{class:(0,c.C_)("Completed"==a.showing?"navigation-button-active":"navigation-button"),onClick:e[3]||(e[3]=t=>o.showCompleted())},"Completed",2),(0,r._)("div",{class:(0,c.C_)("Cancelled"==a.showing?"navigation-button-active":"navigation-button"),onClick:e[4]||(e[4]=t=>o.showCancelled())},"Cancelled",2)]),(0,r._)("div",Ut,[(0,r._)("div",{class:"navigation-dropdown",onClick:e[10]||(e[10]=t=>o.toggleDropdown())},[(0,r.Uk)((0,c.zw)(a.showing)+" ",1),Ot,(0,r._)("div",Lt,[(0,r._)("div",{class:"selection",onClick:e[5]||(e[5]=t=>o.showAll())},"All"),(0,r._)("div",{class:"selection",onClick:e[6]||(e[6]=t=>o.showPreparing())},"Preparing"),(0,r._)("div",{class:"selection",onClick:e[7]||(e[7]=t=>o.showToCollect())},"To Collect"),(0,r._)("div",{class:"selection",onClick:e[8]||(e[8]=t=>o.showCompleted())},"Completed"),(0,r._)("div",{class:"selection",onClick:e[9]||(e[9]=t=>o.showCancelled())},"Cancelled")],512)])]),a.loading?((0,r.wg)(),(0,r.iD)("div",It,St)):a.loading||0==a.itemList.length?((0,r.wg)(),(0,r.iD)("div",re,ne)):((0,r.wg)(),(0,r.iD)("div",$t,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.itemsArray,((t,e)=>((0,r.wg)(),(0,r.iD)("div",{class:"order-item",key:e},[(0,r._)("div",Zt,[(0,r._)("div",Et,[(0,r._)("div",xt,"Order ID: "+(0,c.zw)(t.item_list_id),1),(0,r._)("div",Ft,["Completed"==t.status?((0,r.wg)(),(0,r.iD)("div",Ht,[qt,(0,r.Uk)(" Order is completed ")])):"Cancelled"==t.status?((0,r.wg)(),(0,r.iD)("div",jt,[zt,(0,r.Uk)(" Order is cancelled ")])):"Collect"==t.status?((0,r.wg)(),(0,r.iD)("div",Yt,[Wt,(0,r.Uk)(" Order is ready for collection ")])):"Preparing"==t.status?((0,r.wg)(),(0,r.iD)("div",Rt,[Bt,(0,r.Uk)(" Preparing order ")])):(0,r.kq)("",!0)])]),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(this.findItems(t.item_list_id),((t,e)=>((0,r.wg)(),(0,r.iD)("div",{class:"order-container",key:e},[(0,r._)("div",Kt,[(0,r._)("div",Xt,[(0,r._)("img",{src:o.getImgUrl(t.image_name1)},null,8,Gt)]),(0,r._)("div",Jt,[(0,r._)("div",Qt,(0,c.zw)(t.product_name),1),(0,r._)("div",te,"x"+(0,c.zw)(t.quantity),1)])]),(0,r._)("div",ee,"RM "+(0,c.zw)(t.product_price),1)])))),128))]),(0,r._)("div",ie,[(0,r._)("div",se,[(0,r.Uk)("Subtotal: "),(0,r._)("span",null,(0,c.zw)(t.subtotal.toFixed(2)),1)])])])))),128))],512))])}i(7658);var de=i(1689),ce=i(9354),he={async mounted(){window.onbeforeunload=function(){window.scrollTo(0,0)},window.addEventListener("scroll",this.handleScroll),this.currentUserID=this.$storage.getStorageSync("loginID"),this.paidOrders=await de.Z.showPaidOrders(this.currentUserID),"SequelizeDatabaseError"!=this.paidOrders.name&&(this.itemList=this.paidOrders),await this.pushArray(),this.loading=!1},data(){return{showing:"All",currentUserID:null,paidOrders:[],itemList:[],itemsArray:[],items:[],products:[],testImage:null,orderCount:3,loading:!0}},methods:{getImgUrl(t){return"https://54.253.165.56/images/"+t},async getAllItems(t){var e=await de.Z.showAllItems(t);return e},findItems(t){for(let e=0;e<this.itemsArray.length;e++)if(t==this.itemsArray[e].item_list_id)return this.itemsArray[e].items},async pushArray(){var t=[],e=3;this.itemList.length<e&&(e=this.itemList.length);for(let r=0;r<e;r++){var i=0;this.products=[],this.items=await this.getAllItems(this.itemList[r].item_cart_id);for(let t=0;t<this.items.length;t++){var s=await ce.Z.showProduct(this.items[t].product_id);this.products.push({product_id:s.product_id,product_name:s.product_name,product_price:s.product_price,quantity:this.items[t].quantity,image_name1:s.image_name1}),i+=s.product_price*this.items[t].quantity}t.push({item_list_id:this.itemList[r].item_cart_id,status:this.itemList[r].status,items:this.products,subtotal:i})}this.itemsArray=t},async showAll(){this.loading=!0,this.showing="All",this.itemList=this.paidOrders,await this.pushArray(),this.loading=!1},async showPreparing(){this.loading=!0,this.showing="Preparing",this.itemList=[];for(let t=0;t<this.paidOrders.length;t++)"Preparing"==this.paidOrders[t].status&&this.itemList.push(this.paidOrders[t]);await this.pushArray(),this.loading=!1},async showToCollect(){this.loading=!0,this.showing="To Collect",this.itemList=[];for(let t=0;t<this.paidOrders.length;t++)"Collect"==this.paidOrders[t].status&&this.itemList.push(this.paidOrders[t]);await this.pushArray(),this.loading=!1},async showCompleted(){this.loading=!0,this.showing="Completed",this.itemList=[];for(let t=0;t<this.paidOrders.length;t++)"Completed"==this.paidOrders[t].status&&this.itemList.push(this.paidOrders[t]);await this.pushArray(),this.loading=!1},async showCancelled(){this.loading=!0,this.showing="Cancelled",this.itemList=[];for(let t=0;t<this.paidOrders.length;t++)"Cancelled"==this.paidOrders[t].status&&this.itemList.push(this.paidOrders[t]);await this.pushArray(),this.loading=!1},toggleDropdown(){"block"==this.$refs.dropdown.style.display?this.$refs.dropdown.style.display="none":this.$refs.dropdown.style.display="block"},handleScroll(){document.getElementsByClassName("container")[0].offsetHeight<=window.innerHeight+document.documentElement.scrollTop&&this.loadMore()},async loadMore(){if(window.removeEventListener("scroll",this.handleScroll),this.orderCount-this.itemList.length<3){var t=0;t=this.orderCount<this.itemList.length?3:this.orderCount-this.itemList.length;for(let s=this.orderCount;s<this.orderCount+t;s++){var e=0;this.products=[],this.items=await this.getAllItems(this.itemList[s].item_cart_id);for(let t=0;t<this.items.length;t++){var i=await ce.Z.showProduct(this.items[t].product_id);this.products.push({product_id:i.product_id,product_name:i.product_name,product_price:i.product_price,quantity:this.items[t].quantity,image_name1:i.image_name1}),e+=i.product_price*this.items[t].quantity}this.itemsArray.push({item_list_id:this.itemList[s].item_cart_id,status:this.itemList[s].status,items:this.products,subtotal:e})}this.orderCount+=3,window.addEventListener("scroll",this.handleScroll)}}}};const ue=(0,O.Z)(he,[["render",le],["__scopeId","data-v-2140837c"]]);var we=ue,me=i(3560),pe={components:{NavigationBar:d.Z,UserProfileMenu:I,MyProfile:et,ChangePassword:Dt,MyPurchases:we,WebsiteFooter:me.Z},beforeCreate(){void 0==this.$storage.getStorageSync("loginID")&&(window.location.href="products")},beforeMount(){void 0!=this.$storage.getStorageSync("loginID")&&this.activeteActivityTracker()},beforeUnmount(){window.removeEventListener("mousemove",this.userActivityThrottler),window.removeEventListener("scroll",this.userActivityThrottler),window.removeEventListener("keydown",this.userActivityThrottler),window.removeEventListener("resize",this.userActivityThrottler),clearTimeout(this.userActivityTimeout),clearTimeout(this.userActivityThrottlerTimeout)},mounted(){this.currentTabComponent=this.$storage.getStorageSync("userProfile")},data(){return{currentTabComponent:"",save:0,userActivityTimeout:null,userActivityThrottlerTimeout:null}},methods:{rerenderMenu(){this.$refs.menu.forceRerender(),this.$refs.navbar.forceRerender()},activeteActivityTracker(){window.addEventListener("mousemove",this.resetUserActivityTimeout),window.addEventListener("scroll",this.resetUserActivityTimeout),window.addEventListener("keydown",this.resetUserActivityTimeout),window.addEventListener("resize",this.resetUserActivityTimeout)},resetUserActivityTimeout(){clearTimeout(this.userActivityTimeout),this.userActivityTimeout=setTimeout((()=>{this.inactiveUserAction()}),9e5)},userActivityThrottler(){this.userActivityThrottlerTimeout||(this.userActivityThrottlerTimeout=setTimeout((()=>{this.resetUserActivityTimeout(),clearTimeout(this.userActivityThrottlerTimeout),this.userActivityThrottlerTimeout=null}),1e3))},inactiveUserAction(){console.log("EXPIRED LIAO"),this.$storage.clearStorageSync("loginID"),this.$storage.clearStorageSync("userProfile")}}};const ve=(0,O.Z)(pe,[["render",l],["__scopeId","data-v-d710c392"]]);var ye=ve,fe={components:{UserProfileComponent:ye}};const ge=(0,O.Z)(fe,[["render",a]]);var _e=ge,Ce=i(6400);s.ri(_e).use(Ce.ZP).mount("#app")}},e={};function i(s){var r=e[s];if(void 0!==r)return r.exports;var a=e[s]={exports:{}};return t[s](a,a.exports,i),a.exports}i.m=t,function(){var t=[];i.O=function(e,s,r,a){if(!s){var o=1/0;for(c=0;c<t.length;c++){s=t[c][0],r=t[c][1],a=t[c][2];for(var n=!0,l=0;l<s.length;l++)(!1&a||o>=a)&&Object.keys(i.O).every((function(t){return i.O[t](s[l])}))?s.splice(l--,1):(n=!1,a<o&&(o=a));if(n){t.splice(c--,1);var d=r();void 0!==d&&(e=d)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[s,r,a]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){i.j=873}(),function(){i.p="/FYP2022/"}(),function(){var t={873:0};i.O.j=function(e){return 0===t[e]};var e=function(e,s){var r,a,o=s[0],n=s[1],l=s[2],d=0;if(o.some((function(e){return 0!==t[e]}))){for(r in n)i.o(n,r)&&(i.m[r]=n[r]);if(l)var c=l(i)}for(e&&e(s);d<o.length;d++)a=o[d],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(c)},s=self["webpackChunkfirst_project"]=self["webpackChunkfirst_project"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998,64],(function(){return i(3829)}));s=i.O(s)})();
//# sourceMappingURL=userProfile.d274426c.js.map